# Dise√±o de la interfaz

- Los elementos Streamlit que nos ayudan a crear la interfaz y organizar son los siguientes:
  - `st.container()`: Crea un contenedor para agrupar elementos.
  - `st.side_bar()`: Ayuda a organizar los elementos en la barra lateral de la p√°gina.
  - `st.columns()`: Divide la p√°gina en columnas.
  - `st.tabs()`: Divide el contenido en pesta√±as dentro de la p√°gina.
  - `st.expander()`: Agrega el contenido en la secci√≥n expandible (spoiler).
  - `st.empty()`: Crea un contenedor vac√≠o, √∫til cuando se requiere un marcador de posici√≥n en el dise√±o que luego se puede completar con acciones din√°micas.

    Ejemplo1 Columnas y contenedores:

    ```python
    # Archivo layout_contenedores.py
    import streamlit as st
    import pandas as pd
    import numpy as np

    # Utiliza columnas para colocar los inputs
    # Title
    st.title('App Streamlit Con Layouts y Containers')
    col1, col2 = st.columns(2)

    with col1:
        user_input = st.text_input("Enter some text")

    with col2:
        number_input = st.number_input("Enter a number")

    # Button in its own containerot√≥n dentro de supropio contenedor
    with st.container():
        if st.button('P√∫lsame'):
            st.write('¬°Bot√≥n pulsado!')

    # Dibujo de un gr√°fico en un "expander"
    with st.expander("Ver el gr√°fico"):
        data = pd.DataFrame(np.random.randn(20, 2),
            columns=['A', 'B'])
        st.line_chart(data)

    # Texto del pie de p√°gina dentro de un contenedor
    with st.container():
        st.write("Pie de p√°gina con un texto.")
    ```

    Ejemplo2 Sidebars y tabs:

    ```python
    # Archivo layout_sidebars_tabs.py
    import streamlit as st
    import pandas as pd
    import numpy as np

    # Configuraci√≥n de p√°gina
    st.set_page_config(page_title="Demo: Sidebar & Tabs", layout="wide")

    # 1. SIDEBAR - Es un namespace especial (st.sidebar, no st.side_bar())
    with st.sidebar:
        st.title("‚öôÔ∏è Panel de Control")
        st.divider()
        
        # Widgets en el sidebar
        nombre = st.text_input("¬øC√≥mo te llamas?", "Alumno")
        color_favorito = st.selectbox(
            "Elige un color:",
            ["Azul", "Verde", "Rojo", "Morado"]
        )
        cantidad = st.slider("Nivel de entusiasmo", 1, 10, 5)
        
        # Mostrar datos del usuario
        st.divider()
        st.write(f"Hola **{nombre}**!")
        st.write(f"Color elegido: :{color_favorito.lower()}[{color_favorito}]")
        st.write(f"Nivel: {'‚≠ê' * cantidad}")

    # 2. CONTENIDO PRINCIPAL
    st.title("üìö Demostraci√≥n de Layout en Streamlit")
    st.write(f"Bienvenido/a, **{nombre}**. Aqu√≠ puedes ver diferentes formas de organizar contenido.")

    # 3. TABS - Dividir el contenido en pesta√±as
    tab1, tab2, tab3 = st.tabs(["üìà Datos y Gr√°ficos", "üìä Tabla Din√°mica", "‚ÑπÔ∏è Informaci√≥n"])

    with tab1:
        st.header("An√°lisis de Datos")
        
        # Usando columns dentro de un tab
        col1, col2 = st.columns(2)
        
        with col1:
            st.subheader("Gr√°fico de L√≠neas")
            # Datos aleatorios
            datos = pd.DataFrame({
                'x': range(1, 11),
                'y': np.random.randn(10).cumsum()
            })
            st.line_chart(datos.set_index('x'))
        
        with col2:
            st.subheader("Configuraci√≥n")
            puntos = st.slider("N√∫mero de puntos", 5, 20, 10)
            st.write(f"Mostrando {puntos} puntos aleatorios")
            
            # Expander dentro de un column
            with st.expander("üîç ¬øC√≥mo se generan estos datos?"):
                st.write("""
                Los datos se crean usando NumPy:
                1. Se generan n√∫meros aleatorios con distribuci√≥n normal
                2. Se calcula la suma acumulativa
                3. Se muestran en un gr√°fico de l√≠neas
                """)

    with tab2:
        st.header("Tabla Interactiva")
        
        # Crear un DataFrame de ejemplo
        datos_tabla = pd.DataFrame({
            'Producto': ['Manzanas', 'Pl√°tanos', 'Naranjas', 'Uvas', 'Fresas'],
            'Cantidad (kg)': np.random.randint(10, 100, 5),
            'Precio (‚Ç¨/kg)': np.round(np.random.uniform(1.5, 4.5, 5), 2),
            'Disponible': np.random.choice([True, False], 5)
        })
        
        # A√±adir columna calculada
        datos_tabla['Valor Total (‚Ç¨)'] = datos_tabla['Cantidad (kg)'] * datos_tabla['Precio (‚Ç¨/kg)']
        
        st.dataframe(datos_tabla.style.highlight_max(axis=0), use_container_width=True)
        
        # Mostrar m√©tricas resumen
        st.subheader("Resumen")
        metric_col1, metric_col2, metric_col3 = st.columns(3)
        with metric_col1:
            st.metric("Productos Totales", len(datos_tabla))
        with metric_col2:
            st.metric("Cantidad Promedio", f"{datos_tabla['Cantidad (kg)'].mean():.1f} kg")
        with metric_col3:
            st.metric("Valor Total", f"{datos_tabla['Valor Total (‚Ç¨)'].sum():.2f} ‚Ç¨")

    with tab3:
        st.header("Recursos de Aprendizaje")
        
        # Contenedor para informaci√≥n
        with st.container():
            st.subheader("Elementos de Layout en Streamlit")
            
            # Lista de elementos con emojis
            elementos = [
                ("`st.sidebar`", "Barra lateral para controles y configuraci√≥n"),
                ("`st.tabs()`", "Divide el contenido en pesta√±as independientes"),
                ("`st.columns()`", "Organiza contenido en columnas horizontales"),
                ("`st.expander()`", "Contenido plegable/desplegable"),
                ("`st.container()`", "Agrupa elementos para personalizar layout"),
                ("`st.empty()`", "Marcador de posici√≥n para contenido din√°mico")
            ]
            
            for elemento, descripcion in elementos:
                st.markdown(f"- **{elemento}**: {descripcion}")
        
        # Usando st.empty() para contenido din√°mico
        st.divider()
        st.subheader("Contenedor Vac√≠o Din√°mico")
        
        placeholder = st.empty()  # Contenedor vac√≠o que llenaremos despu√©s
        
        if st.button("üéÅ Haz clic para revelar", type="secondary"):
            with placeholder.container():  # Llenamos el placeholder
                st.success("¬°Contenido din√°mico cargado!")
                st.balloons()
                st.write("Este contenido apareci√≥ sin recargar toda la p√°gina.")
        else:
            with placeholder.container():
                st.info("Presiona el bot√≥n para ver contenido din√°mico aqu√≠.")

    # 4. PIE DE P√ÅGINA
    st.divider()
    st.caption("Demo creada para la clase de Streamlit ‚Ä¢ Usa los controles en el sidebar para interactuar")
    ```

    - Adem√°s de los elementos de dise√±o destacados, un conjunto de funciones de utilidad desempe√±a un papel fundamental en la mejora de la funcionalidad y la experiencia del usuario de una aplicaci√≥n. Si bien no son estrictamente elementos de dise√±o, estas utilidades son herramientas esenciales para crear aplicaciones m√°s din√°micas, informativas y f√°ciles de usar. En esta subsecci√≥n, exploraremos tres de estas utilidades:
    - `st.set_page_config()`: Establece la configuraci√≥n de nivel de p√°gina, como el nombre de la p√°gina, que se mostrar√° en la pesta√±a del navegador.
    - `st.echo()`: Muestra el texto como un bloque de c√≥digo.
    - `st.help()`: Imprime los resultados de ayuda para cualquier objeto.

    Ejemplo:

    ```python
    # Archivo layout_echo_help.py
    import streamlit as st
    # Setting the page config
    st.set_page_config(page_title="Mi mejor App",
        page_icon=":tada:",
        layout="wide")
    # Displaying code and its output
    with st.echo():
        # This code will be shown and executed
        st.write("Esta l√≠nea de c√≥digo se mostrar√° y despu√©s se ejecutar√°.")
    
    # Showing help information for a Streamlit function
    st.help(st.sidebar)
    ```

- Widgets de flujo de control de Streamlit
Los widgets de flujo de control de Streamlit deciden c√≥mo responde tu aplicaci√≥n cuando alguien la usa. Son como las se√±ales de tr√°fico en una ciudad; estos widgets controlan lo que sucede en tu aplicaci√≥n cuando los usuarios interact√∫an con ella. Desempe√±an un papel crucial en la gesti√≥n del flujo de ejecuci√≥n de tu Streamlit. Al utilizar estos widgets de manera eficaz, puedes crear experiencias m√°s atractivas e interactivas, guiando a los usuarios a trav√©s de un flujo continuo de operaciones e interacciones dentro de la aplicaci√≥n.

Los widgets de flujo de control de Streamlit incluyen lo siguiente:
`st.stop()`: se utiliza para detener la ejecuci√≥n del script de Streamlit. y
`st.form_submit_button()`: estos widgets permiten agrupar un conjunto de widgets de entrada en un formulario. Esto es √∫til cuando se necesita enviar una entrada compleja de forma colectiva.
`st.form` `st.rerun()`: se utiliza de forma program√°tica para volver a ejecutar una aplicaci√≥n Streamlit.

El siguiente c√≥digo demuestra el uso de los widgets de flujo de control de Streamlit:

```python
    # C√≥digo en stop_y_rerun.py
    import streamlit as st
    import random
    
    if st.checkbox("Detener la aplicaci√≥n"):
        st.write("Aplicaci√≥n detenida.")
        st.stop()
    
    st.write("Si marcas detener la app desaparece el contenido.")
    if st.button("Rerun the app"):
        st.rerun()
    
    # Display a random number
    st.write(random.randint(1, 100))
    
    with st.form(key='my_form'):
        text_input = st.text_input(label='Introduce texto')
        submit_button = st.form_submit_button(label='Submit')
    
    if submit_button:
        st.write(f'Has introducido: {text_input}')
    ```
    
- Temas de Streamlit
Streamlit ofrece capacidades de temas flexibles, lo que permite a los usuarios personalizar la apariencia de sus aplicaciones para que coincida con su marca o preferencias personales. Si bien puede ajustar la configuraci√≥n de temas de alto nivel mediante el men√∫ de hamburguesa de configuraci√≥n en la esquina superior derecha de la aplicaci√≥n, se puede lograr un control m√°s granular a trav√©s del archivo .streamlit/config.toml.
    
    Este archivo de configuraci√≥n le permite establecer atributos de tema espec√≠ficos para garantizar una experiencia visual consistente. El archivo config.toml le permite definir varios aspectos del tema de su aplicaci√≥n Streamlit. 
    
    Puede controlar las siguientes seis opciones clave: 
    `primaryColor`: define el color principal o el color de acento utilizado en la aplicaci√≥n (botones, controles deslizantes y otros elementos activos). 
    `backgroundColor`: establece el color del fondo principal. 
    `SecondaryBackgroundColor`: se utiliza para √°reas secundarias, como la barra lateral y el fondo, para widgets interactivos como gr√°ficos. 
    `textColor`: determina el color del texto. 
    `font`: especifica la fuente utilizada en toda la aplicaci√≥n. 
    `base`: la opci√≥n base, si se define, hereda el tema preestablecido de Streamlit claro u oscuro; 
    
    Cualquier configuraci√≥n adicional definida con la base sobrescribir√° la configuraci√≥n correspondiente sobre el tema predeterminado de Streamlit. El siguiente es un ejemplo de c√≥mo configurar un tema personalizado:
    
    ```toml
    [theme]
    primaryColor="#333af6"
    backgroundColor="#eea9a9"
    secondaryBackgroundColor="#cad6e8"
    textColor="#2030bb"
    ```
    
    ```python
    import numpy as np
    import streamlit as st
    
    # App title
    st.title("Streamlit Custom Theme Demo")
    # Display text with different formatting
    st.header("This is a header")
    st.subheader("This is a subheader")
    st.text("This is some text.")
    st.write("This Streamlit app demonstrates the customtheme.")
    # Sidebar with some widgets
    st.sidebar.header("Sidebar")
    st.sidebar.write("This is the sidebar.")
    st.sidebar.checkbox("Check me out")
    st.sidebar.radio("Choose an option", ['Option 1','Option 2', 'Option 3'])
    st.sidebar.selectbox("Select a number", np.arange(1,11))
    ```
    
- Renderizado de HTML y CSS
    
    Streamlit tambi√©n le permite refinar a√∫n m√°s su tema mediante la integraci√≥n de CSS personalizado en su aplicaci√≥n. Esto le permite personalizar la apariencia de su aplicaci√≥n Streamlit m√°s all√° de las capacidades de creaci√≥n de temas integradas. Esto se puede lograr utilizando st.markdown con el indicador unsafe_allow_html. Esto le permite representar HTML, incluidos estilos y scripts integrados, dentro de una aplicaci√≥n Streamlit. Si bien esta caracter√≠stica ofrece mayor flexibilidad y opciones de personalizaci√≥n, tambi√©n tiene ciertas desventajas. Las ventajas y desventajas se enumeran en la Tabla
    
    | **Ventajas** | **Desventajas** |
    | --- | --- |
    | **Personalizaci√≥n**: permite una personalizaci√≥n avanzada de la interfaz de usuario de la aplicaci√≥n, incluidos estilos personalizados, contenido externo o funciones HTML que Streamlit no admite de forma nativa. | **Riesgos de seguridad**: como sugiere el nombre de la bandera, permitir HTML sin formato puede presentar riesgos de seguridad, particularmente por ataques de inyecci√≥n de JavaScript (XSS). Esto es una preocupaci√≥n si el contenido HTML se genera din√°micamente a partir de la entrada del usuario |
    | **Control sobre el dise√±o**: con HTML, obtienes m√°s control sobre el dise√±o y la posici√≥n de los elementos, lo que puede ser crucial para lograr objetivos de dise√±o espec√≠ficos. | **Mantenibilidad**: el HTML y CSS personalizados pueden hacer que la aplicaci√≥n sea m√°s dif√≠cil de mantener si el c√≥digo se vuelve demasiado complejo o si depende de comportamientos espec√≠ficos que podr√≠an cambiar en futuras actualizaciones de Streamlit. |
    | **Integraci√≥n de contenido enriquecido**: permite la integraci√≥n de contenido enriquecido como marcos, gr√°ficos personalizados o elementos interactivos que pueden mejorar la experiencia del usuario. | **Impacto en el rendimiento**: el uso excesivo de HTML sin formato y estilos personalizados puede afectar el rendimiento de la aplicaci√≥n, especialmente si genera un DOM grande o reglas CSS complejas. |
    | **Soluciones r√°pidas y alternativas**: √∫til para soluciones r√°pidas o temporales donde los componentes nativos de Streamlit pueden fallar.  | **Compatibilidad entre navegadores**: es posible que el HTML y el CSS personalizados no sean consistentes en todos los navegadores, lo que genera problemas de compatibilidad. |
    
    ```python
    import streamlit as st
    # Inyecci√≥n de CSS con st.markdown
    st.markdown("""
        <style>
            .main-title {
                color: blue;
                font-family: Arial, sans-serif;
                }
            .custom-text {
                color: green;
                font-size: 20px;
                }
            /* Modificaci√≥n de elementos streamlit */
            .stTextInput > label, 
            .stButton > button {
                color: red;
            }
        </style>
                            """, unsafe_allow_html=True)
    # Use the custom CSS classes
    titulo = '<h1 class="main-title">T√≠tulo customizado</h1>'
    texto = '<p class="custom-text">A este texto se le ha aplicado CSS.</p>'
    st.markdown(titulo, unsafe_allow_html=True)
    st.markdown(texto, unsafe_allow_html=True)
    # Standard Streamlit elements
    st.text_input("Esta etiqueta est√° customizada")
    st.button("El texto del bot√≥n, tambi√©n") 
    ```
    
- Creaci√≥n de dashboards utilizando la barra lateral (`st.sidebar`)
- Distribuci√≥n de elementos y creaci√≥n de layouts personalizados.
